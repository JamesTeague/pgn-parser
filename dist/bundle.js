(()=>{var t={678:function(t,r){var n,e;void 0===(e="function"==typeof(n=function(){"use strict";function t(r,n,e,u){var a=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(a,t.prototype),a.expected=n,a.found=e,a.location=u,a.name="SyntaxError",a}function r(t,r,n){return n=n||" ",t.length>r?t:(r-=t.length,t+(n+=n.repeat(r)).slice(0,r))}return function(t,r){function n(){this.constructor=t}n.prototype=r.prototype,t.prototype=new n}(t,Error),t.prototype.format=function(t){var n="Error: "+this.message;if(this.location){var e,u=null;for(e=0;e<t.length;e++)if(t[e].source===this.location.source){u=t[e].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,o=this.location.source+":"+a.line+":"+a.column;if(u){var s=this.location.end,i=r("",a.line.toString().length),c=u[a.line-1],l=a.line===s.line?s.column:c.length+1;n+="\n --\x3e "+o+"\n"+i+" |\n"+a.line+" | "+c+"\n"+i+" | "+r("",a.column-1)+r("",l-a.column,"^")}else n+="\n at "+o}return n},t.buildMessage=function(t,r){var n={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var r=t.parts.map((function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)}));return"["+(t.inverted?"^":"")+r+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+e(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+e(t)}))}function o(t){return n[t.type](t)}return"Expected "+function(t){var r,n,e=t.map(o);if(e.sort(),e.length>0){for(r=1,n=1;r<e.length;r++)e[r-1]!==e[r]&&(e[n]=e[r],n++);e.length=n}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(r)+" found."},{SyntaxError:t,parse:function(r,n){var e,u={},a=(n=void 0!==n?n:{}).grammarSource,o={pgn:ks,tags:_o,game:Mo,games:function(){var t,r,n,e,a,o;if(t=wo,ss(),r=wo,(n=Mo())!==u){for(e=[],a=wo,ss(),(o=Mo())!==u?($o=a,a=bo(0,o)):(wo=a,a=u);a!==u;)e.push(a),a=wo,ss(),(o=Mo())!==u?($o=a,a=bo(0,o)):(wo=a,a=u);$o=r,r=[n].concat(e)}else wo=r,r=u;return r===u&&(r=null),$o=t,t=r}},s=ks,i="Event",c="event",l="Site",f="site",h="Date",v="date",p="Round",b="round",m="White",d="white",A="Black",g="black",C="Result",k="result",y="WhiteTitle",B="Whitetitle",T="whitetitle",E="whiteTitle",W="BlackTitle",O="Blacktitle",x="blacktitle",w="blackTitle",$="WhiteELO",U="WhiteElo",N="Whiteelo",S="whiteelo",R="whiteElo",j="BlackELO",F="BlackElo",D="Blackelo",P="blackelo",I="blackElo",V="WhiteUSCF",M="WhiteUscf",_="Whiteuscf",Q="whiteuscf",L="whiteUscf",K="BlackUSCF",G="BlackUscf",Y="Blackuscf",q="blackuscf",z="blackUscf",H="WhiteNA",Z="WhiteNa",J="Whitena",X="whitena",tt="whiteNa",rt="whiteNA",nt="BlackNA",et="BlackNa",ut="Blackna",at="blackna",ot="blackNA",st="blackNa",it="WhiteType",ct="Whitetype",lt="whitetype",ft="whiteType",ht="BlackType",vt="Blacktype",pt="blacktype",bt="blackType",mt="EventDate",dt="Eventdate",At="eventdate",gt="eventDate",Ct="EventSponsor",kt="Eventsponsor",yt="eventsponsor",Bt="eventSponsor",Tt="Section",Et="section",Wt="Stage",Ot="stage",xt="Board",wt="board",$t="Opening",Ut="opening",Nt="Variation",St="variation",Rt="SubVariation",jt="Subvariation",Ft="subvariation",Dt="subVariation",Pt="ECO",It="Eco",Vt="eco",Mt="NIC",_t="Nic",Qt="nic",Lt="Time",Kt="time",Gt="UTCTime",Yt="UTCtime",qt="UtcTime",zt="Utctime",Ht="utctime",Zt="utcTime",Jt="UTCDate",Xt="UTCdate",tr="UtcDate",rr="Utcdate",nr="utcdate",er="utcDate",ur="TimeControl",ar="Timecontrol",or="timecontrol",sr="timeControl",ir="SetUp",cr="Setup",lr="setup",fr="setUp",hr="FEN",vr="Fen",pr="fen",br="Termination",mr="termination",dr="Annotator",Ar="annotator",gr="Mode",Cr="mode",kr="PlyCount",yr="Plycount",Br="plycount",Tr="plyCount",Er="Variant",Wr="variant",Or="WhiteRatingDiff",xr="BlackRatingDiff",wr="WhiteFideId",$r="BlackFideId",Ur="WhiteTeam",Nr="BlackTeam",Sr="Clock",Rr="WhiteClock",jr="BlackClock",Fr=".",Dr=":",Pr="/",Ir="?",Vr="-",Mr="1/2-1/2",_r="%csl",Qr="%cal",Lr="%eval",Kr=",",Gr="clk",Yr="egt",qr="emt",zr="mct",Hr="O-O-O",Zr="O-O",Jr="+-",Xr="!!",tn="??",rn="!?",nn="?!",en="-+",un=/^[ \t\n\r]/,an=/^[\n\r]/,on=/^[\-a-zA-Z0-9.]/,sn=/^[0-9?]/,cn=/^[0-9]/,ln=/^[^\n\r]/,fn=/^[RNBQKP]/,hn=/^[RNBQ]/,vn=/^[a-h]/,pn=/^[1-8]/,bn=jo("Event",!1),mn=jo("event",!1),dn=jo("Site",!1),An=jo("site",!1),gn=jo("Date",!1),Cn=jo("date",!1),kn=jo("Round",!1),yn=jo("round",!1),Bn=jo("White",!1),Tn=jo("white",!1),En=jo("Black",!1),Wn=jo("black",!1),On=jo("Result",!1),xn=jo("result",!1),wn=jo("WhiteTitle",!1),$n=jo("Whitetitle",!1),Un=jo("whitetitle",!1),Nn=jo("whiteTitle",!1),Sn=jo("BlackTitle",!1),Rn=jo("Blacktitle",!1),jn=jo("blacktitle",!1),Fn=jo("blackTitle",!1),Dn=jo("WhiteELO",!1),Pn=jo("WhiteElo",!1),In=jo("Whiteelo",!1),Vn=jo("whiteelo",!1),Mn=jo("whiteElo",!1),_n=jo("BlackELO",!1),Qn=jo("BlackElo",!1),Ln=jo("Blackelo",!1),Kn=jo("blackelo",!1),Gn=jo("blackElo",!1),Yn=jo("WhiteUSCF",!1),qn=jo("WhiteUscf",!1),zn=jo("Whiteuscf",!1),Hn=jo("whiteuscf",!1),Zn=jo("whiteUscf",!1),Jn=jo("BlackUSCF",!1),Xn=jo("BlackUscf",!1),te=jo("Blackuscf",!1),re=jo("blackuscf",!1),ne=jo("blackUscf",!1),ee=jo("WhiteNA",!1),ue=jo("WhiteNa",!1),ae=jo("Whitena",!1),oe=jo("whitena",!1),se=jo("whiteNa",!1),ie=jo("whiteNA",!1),ce=jo("BlackNA",!1),le=jo("BlackNa",!1),fe=jo("Blackna",!1),he=jo("blackna",!1),ve=jo("blackNA",!1),pe=jo("blackNa",!1),be=jo("WhiteType",!1),me=jo("Whitetype",!1),de=jo("whitetype",!1),Ae=jo("whiteType",!1),ge=jo("BlackType",!1),Ce=jo("Blacktype",!1),ke=jo("blacktype",!1),ye=jo("blackType",!1),Be=jo("EventDate",!1),Te=jo("Eventdate",!1),Ee=jo("eventdate",!1),We=jo("eventDate",!1),Oe=jo("EventSponsor",!1),xe=jo("Eventsponsor",!1),we=jo("eventsponsor",!1),$e=jo("eventSponsor",!1),Ue=jo("Section",!1),Ne=jo("section",!1),Se=jo("Stage",!1),Re=jo("stage",!1),je=jo("Board",!1),Fe=jo("board",!1),De=jo("Opening",!1),Pe=jo("opening",!1),Ie=jo("Variation",!1),Ve=jo("variation",!1),Me=jo("SubVariation",!1),_e=jo("Subvariation",!1),Qe=jo("subvariation",!1),Le=jo("subVariation",!1),Ke=jo("ECO",!1),Ge=jo("Eco",!1),Ye=jo("eco",!1),qe=jo("NIC",!1),ze=jo("Nic",!1),He=jo("nic",!1),Ze=jo("Time",!1),Je=jo("time",!1),Xe=jo("UTCTime",!1),tu=jo("UTCtime",!1),ru=jo("UtcTime",!1),nu=jo("Utctime",!1),eu=jo("utctime",!1),uu=jo("utcTime",!1),au=jo("UTCDate",!1),ou=jo("UTCdate",!1),su=jo("UtcDate",!1),iu=jo("Utcdate",!1),cu=jo("utcdate",!1),lu=jo("utcDate",!1),fu=jo("TimeControl",!1),hu=jo("Timecontrol",!1),vu=jo("timecontrol",!1),pu=jo("timeControl",!1),bu=jo("SetUp",!1),mu=jo("Setup",!1),du=jo("setup",!1),Au=jo("setUp",!1),gu=jo("FEN",!1),Cu=jo("Fen",!1),ku=jo("fen",!1),yu=jo("Termination",!1),Bu=jo("termination",!1),Tu=jo("Annotator",!1),Eu=jo("annotator",!1),Wu=jo("Mode",!1),Ou=jo("mode",!1),xu=jo("PlyCount",!1),wu=jo("Plycount",!1),$u=jo("plycount",!1),Uu=jo("plyCount",!1),Nu=jo("Variant",!1),Su=jo("variant",!1),Ru=jo("WhiteRatingDiff",!1),ju=jo("BlackRatingDiff",!1),Fu=jo("WhiteFideId",!1),Du=jo("BlackFideId",!1),Pu=jo("WhiteTeam",!1),Iu=jo("BlackTeam",!1),Vu=jo("Clock",!1),Mu=jo("WhiteClock",!1),_u=jo("BlackClock",!1),Qu=Do("whitespace"),Lu=Fo([" ","\t","\n","\r"],!1,!1),Ku=Fo(["\n","\r"],!1,!1),Gu=Do("string"),Yu=Fo(["-",["a","z"],["A","Z"],["0","9"],"."],!1,!1),qu=jo('"',!1),zu={type:"any"},Hu=Fo([["0","9"],"?"],!1,!1),Zu=jo(".",!1),Ju=Fo([["0","9"]],!1,!1),Xu=jo(":",!1),ta=jo("/",!1),ra=jo("B",!1),na=jo("W",!1),ea=jo("N",!1),ua=jo("?",!1),aa=jo("-",!1),oa=jo("+",!1),sa=jo("*",!1),ia=jo("1-0",!1),ca=jo("0-1",!1),la=jo("1/2-1/2",!1),fa=jo("%csl",!1),ha=jo("%cal",!1),va=jo("%",!1),pa=jo("%eval",!1),ba=jo("[%",!1),ma=jo("}",!1),da=Fo(["\n","\r"],!0,!1),Aa=jo(",",!1),ga=jo("Y",!1),Ca=jo("G",!1),ka=jo("R",!1),ya=jo("{",!1),Ba=jo("[",!1),Ta=jo("]",!1),Ea=jo(";",!1),Wa=jo("clk",!1),Oa=jo("egt",!1),xa=jo("emt",!1),wa=jo("mct",!1),$a=jo("(",!1),Ua=jo(")",!1),Na=Do("integer"),Sa=jo(" ",!1),Ra=jo("O-O-O",!1),ja=jo("O-O",!1),Fa=jo("@",!1),Da=jo("+-",!1),Pa=jo("$$$",!1),Ia=jo("#",!1),Va=jo("=",!1),Ma=jo("$",!1),_a=jo("!!",!1),Qa=jo("??",!1),La=jo("!?",!1),Ka=jo("?!",!1),Ga=jo("!",!1),Ya=jo("‼",!1),qa=jo("⁇",!1),za=jo("⁉",!1),Ha=jo("⁈",!1),Za=jo("□",!1),Ja=jo("∞",!1),Xa=jo("⩲",!1),to=jo("⩱",!1),ro=jo("±",!1),no=jo("∓",!1),eo=jo("-+",!1),uo=jo("⨀",!1),ao=jo("⟳",!1),oo=jo("→",!1),so=jo("↑",!1),io=jo("⇆",!1),co=jo("D",!1),lo=Fo(["R","N","B","Q","K","P"],!1,!1),fo=Fo(["R","N","B","Q"],!1,!1),ho=Fo([["a","h"]],!1,!1),vo=Fo([["1","8"]],!1,!1),po=jo("x",!1),bo=function(t,r){return r},mo=function(t){return t.join("")},Ao=function(t){return Hs(t)},go=function(t,r){return r},Co=function(t,r){return r},ko=function(t,r){return r},yo=function(t,r,n){return n},Bo=function(t,r,n){var e={};return e[t]=r,Js([e].concat(n[0]))},To=function(t,r){return r},Eo=function(t,r,n){return n},Wo=function(t,r){return r},Oo=function(t,r){var n=[];n.push(t);for(var e=0;e<r.length;e++)n.push(r[e][2]);return n},xo=function(t){return t[1]},wo=0,$o=0,Uo=[{line:1,column:1}],No=0,So=[],Ro=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=o[n.startRule]}function jo(t,r){return{type:"literal",text:t,ignoreCase:r}}function Fo(t,r,n){return{type:"class",parts:t,inverted:r,ignoreCase:n}}function Do(t){return{type:"other",description:t}}function Po(t){var n,e=Uo[t];if(e)return e;for(n=t-1;!Uo[n];)n--;for(e={line:(e=Uo[n]).line,column:e.column};n<t;)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return Uo[t]=e,e}function Io(t,r){var n=Po(t),e=Po(r);return{source:a,start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:e.line,column:e.column}}}function Vo(t){wo<No||(wo>No&&(No=wo,So=[]),So.push(t))}function Mo(){var t,r,n,e,a;return t=wo,r=_o(),(n=ys())===u&&(n=null),(e=ks())!==u?($o=t,a=qs,qs=[],t={tags:r,gameComment:n,moves:e,messages:a}):(wo=t,t=u),t}function _o(){var t,r,n,e,a,o,s,i;if(t=wo,ss(),r=wo,(n=Qo())!==u){for(e=[],a=wo,ss(),(o=Qo())!==u?($o=a,a=bo(0,o)):(wo=a,a=u);a!==u;)e.push(a),a=wo,ss(),(o=Qo())!==u?($o=a,a=bo(0,o)):(wo=a,a=u);$o=r,s={},[n].concat(e).forEach((function(t){s[t.name]=t.value})),r=s}else wo=r,r=u;return r===u&&(r=null),n=ss(),$o=t,null===(i=r)?{}:(i.messages=qs,i)}function Qo(){var t,n;return t=wo,Us()!==u?(ss(),(n=function(){var t,n,e,a,o;return t=wo,(n=function(){var t;return r.substr(wo,5)===i?(t=i,wo+=5):(t=u,0===Ro&&Vo(bn)),t===u&&(r.substr(wo,5)===c?(t=c,wo+=5):(t=u,0===Ro&&Vo(mn))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,s=a,t={name:"Event",value:s}):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,4)===l?(t=l,wo+=4):(t=u,0===Ro&&Vo(dn)),t===u&&(r.substr(wo,4)===f?(t=f,wo+=4):(t=u,0===Ro&&Vo(An))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Site",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Ko())!==u?(e=ss(),(a=vs())!==u?($o=t,t=function(t){return{name:"Date",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,5)===p?(t=p,wo+=5):(t=u,0===Ro&&Vo(kn)),t===u&&(r.substr(wo,5)===b?(t=b,wo+=5):(t=u,0===Ro&&Vo(yn))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Round",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,10)===y?(t=y,wo+=10):(t=u,0===Ro&&Vo(wn)),t===u&&(r.substr(wo,10)===B?(t=B,wo+=10):(t=u,0===Ro&&Vo($n)),t===u&&(r.substr(wo,10)===T?(t=T,wo+=10):(t=u,0===Ro&&Vo(Un)),t===u&&(r.substr(wo,10)===E?(t=E,wo+=10):(t=u,0===Ro&&Vo(Nn))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"WhiteTitle",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,10)===W?(t=W,wo+=10):(t=u,0===Ro&&Vo(Sn)),t===u&&(r.substr(wo,10)===O?(t=O,wo+=10):(t=u,0===Ro&&Vo(Rn)),t===u&&(r.substr(wo,10)===x?(t=x,wo+=10):(t=u,0===Ro&&Vo(jn)),t===u&&(r.substr(wo,10)===w?(t=w,wo+=10):(t=u,0===Ro&&Vo(Fn))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"BlackTitle",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Yo())!==u?(e=ss(),(a=gs())!==u?($o=t,t=function(t){return{name:"WhiteElo",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=qo())!==u?(e=ss(),(a=gs())!==u?($o=t,t=function(t){return{name:"BlackElo",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=zo())!==u?(e=ss(),(a=Cs())!==u?($o=t,t=function(t){return{name:"WhiteUSCF",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Ho())!==u?(e=ss(),(a=Cs())!==u?($o=t,t=function(t){return{name:"BlackUSCF",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,7)===H?(t=H,wo+=7):(t=u,0===Ro&&Vo(ee)),t===u&&(r.substr(wo,7)===Z?(t=Z,wo+=7):(t=u,0===Ro&&Vo(ue)),t===u&&(r.substr(wo,7)===J?(t=J,wo+=7):(t=u,0===Ro&&Vo(ae)),t===u&&(r.substr(wo,7)===X?(t=X,wo+=7):(t=u,0===Ro&&Vo(oe)),t===u&&(r.substr(wo,7)===tt?(t=tt,wo+=7):(t=u,0===Ro&&Vo(se)),t===u&&(r.substr(wo,7)===rt?(t=rt,wo+=7):(t=u,0===Ro&&Vo(ie))))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"WhiteNA",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,7)===nt?(t=nt,wo+=7):(t=u,0===Ro&&Vo(ce)),t===u&&(r.substr(wo,7)===et?(t=et,wo+=7):(t=u,0===Ro&&Vo(le)),t===u&&(r.substr(wo,7)===ut?(t=ut,wo+=7):(t=u,0===Ro&&Vo(fe)),t===u&&(r.substr(wo,7)===at?(t=at,wo+=7):(t=u,0===Ro&&Vo(he)),t===u&&(r.substr(wo,7)===ot?(t=ot,wo+=7):(t=u,0===Ro&&Vo(ve)),t===u&&(r.substr(wo,7)===st?(t=st,wo+=7):(t=u,0===Ro&&Vo(pe))))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"BlackNA",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,9)===it?(t=it,wo+=9):(t=u,0===Ro&&Vo(be)),t===u&&(r.substr(wo,9)===ct?(t=ct,wo+=9):(t=u,0===Ro&&Vo(me)),t===u&&(r.substr(wo,9)===lt?(t=lt,wo+=9):(t=u,0===Ro&&Vo(de)),t===u&&(r.substr(wo,9)===ft?(t=ft,wo+=9):(t=u,0===Ro&&Vo(Ae))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"WhiteType",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,9)===ht?(t=ht,wo+=9):(t=u,0===Ro&&Vo(ge)),t===u&&(r.substr(wo,9)===vt?(t=vt,wo+=9):(t=u,0===Ro&&Vo(Ce)),t===u&&(r.substr(wo,9)===pt?(t=pt,wo+=9):(t=u,0===Ro&&Vo(ke)),t===u&&(r.substr(wo,9)===bt?(t=bt,wo+=9):(t=u,0===Ro&&Vo(ye))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"BlackType",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,5)===m?(t=m,wo+=5):(t=u,0===Ro&&Vo(Bn)),t===u&&(r.substr(wo,5)===d?(t=d,wo+=5):(t=u,0===Ro&&Vo(Tn))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"White",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,5)===A?(t=A,wo+=5):(t=u,0===Ro&&Vo(En)),t===u&&(r.substr(wo,5)===g?(t=g,wo+=5):(t=u,0===Ro&&Vo(Wn))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Black",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Go())!==u?(e=ss(),(a=function(){var t,r;return t=wo,fs()!==u&&(r=As())!==u&&fs()!==u?($o=t,t=r):(wo=t,t=u),t}())!==u?($o=t,t=function(t){return{name:"Result",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Zo())!==u?(e=ss(),(a=vs())!==u?($o=t,t=function(t){return{name:"EventDate",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,12)===Ct?(t=Ct,wo+=12):(t=u,0===Ro&&Vo(Oe)),t===u&&(r.substr(wo,12)===kt?(t=kt,wo+=12):(t=u,0===Ro&&Vo(xe)),t===u&&(r.substr(wo,12)===yt?(t=yt,wo+=12):(t=u,0===Ro&&Vo(we)),t===u&&(r.substr(wo,12)===Bt?(t=Bt,wo+=12):(t=u,0===Ro&&Vo($e))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"EventSponsor",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,7)===Tt?(t=Tt,wo+=7):(t=u,0===Ro&&Vo(Ue)),t===u&&(r.substr(wo,7)===Et?(t=Et,wo+=7):(t=u,0===Ro&&Vo(Ne))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Section",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,5)===Wt?(t=Wt,wo+=5):(t=u,0===Ro&&Vo(Se)),t===u&&(r.substr(wo,5)===Ot?(t=Ot,wo+=5):(t=u,0===Ro&&Vo(Re))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Stage",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Jo())!==u?(e=ss(),(a=Cs())!==u?($o=t,t=function(t){return{name:"Board",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,7)===$t?(t=$t,wo+=7):(t=u,0===Ro&&Vo(De)),t===u&&(r.substr(wo,7)===Ut?(t=Ut,wo+=7):(t=u,0===Ro&&Vo(Pe))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Opening",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,9)===Nt?(t=Nt,wo+=9):(t=u,0===Ro&&Vo(Ie)),t===u&&(r.substr(wo,9)===St?(t=St,wo+=9):(t=u,0===Ro&&Vo(Ve))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Variation",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,12)===Rt?(t=Rt,wo+=12):(t=u,0===Ro&&Vo(Me)),t===u&&(r.substr(wo,12)===jt?(t=jt,wo+=12):(t=u,0===Ro&&Vo(_e)),t===u&&(r.substr(wo,12)===Ft?(t=Ft,wo+=12):(t=u,0===Ro&&Vo(Qe)),t===u&&(r.substr(wo,12)===Dt?(t=Dt,wo+=12):(t=u,0===Ro&&Vo(Le))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"SubVariation",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,3)===Pt?(t=Pt,wo+=3):(t=u,0===Ro&&Vo(Ke)),t===u&&(r.substr(wo,3)===It?(t=It,wo+=3):(t=u,0===Ro&&Vo(Ge)),t===u&&(r.substr(wo,3)===Vt?(t=Vt,wo+=3):(t=u,0===Ro&&Vo(Ye)))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"ECO",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,3)===Mt?(t=Mt,wo+=3):(t=u,0===Ro&&Vo(qe)),t===u&&(r.substr(wo,3)===_t?(t=_t,wo+=3):(t=u,0===Ro&&Vo(ze)),t===u&&(r.substr(wo,3)===Qt?(t=Qt,wo+=3):(t=u,0===Ro&&Vo(He)))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"NIC",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Xo())!==u?(e=ss(),(a=ps())!==u?($o=t,t=function(t){return{name:"Time",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=ts())!==u?(e=ss(),(a=ps())!==u?($o=t,t=function(t){return{name:"UTCTime",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=rs())!==u?(e=ss(),(a=vs())!==u?($o=t,t=function(t){return{name:"UTCDate",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=ns())!==u?(e=ss(),(a=function(){var t,n;return t=wo,fs()!==u&&(n=function(){var t,n,e,a;return t=wo,63===r.charCodeAt(wo)?(n="?",wo++):(n=u,0===Ro&&Vo(ua)),n!==u&&($o=t,n={kind:"unknown",value:"?"}),(t=n)===u&&(t=wo,45===r.charCodeAt(wo)?(n=Vr,wo++):(n=u,0===Ro&&Vo(aa)),n!==u&&($o=t,n={kind:"unlimited",value:"-"}),(t=n)===u&&(t=wo,(n=Ps())!==u?(47===r.charCodeAt(wo)?(e="/",wo++):(e=u,0===Ro&&Vo(ta)),e!==u&&(a=Ps())!==u?($o=t,o=n,s=a,t={kind:"movesInSeconds",moves:o,seconds:s}):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Ps())!==u?(43===r.charCodeAt(wo)?(e="+",wo++):(e=u,0===Ro&&Vo(oa)),e!==u&&(a=Ps())!==u?($o=t,t=function(t,r){return{kind:"increment",seconds:t,increment:r}}(n,a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Ps())!==u&&($o=t,n=function(t){return{kind:"suddenDeath",seconds:t}}(n)),(t=n)===u&&(t=wo,42===r.charCodeAt(wo)?(n="*",wo++):(n=u,0===Ro&&Vo(sa)),n!==u&&(e=Ps())!==u?($o=t,t=function(t){return{kind:"hourglass",seconds:t}}(e)):(wo=t,t=u)))))),t;var o,s}())!==u&&fs()!==u?($o=t,t=n):(wo=t,t=u),t}())!==u?($o=t,t=function(t){return{name:"TimeControl",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,5)===ir?(t=ir,wo+=5):(t=u,0===Ro&&Vo(bu)),t===u&&(r.substr(wo,5)===cr?(t=cr,wo+=5):(t=u,0===Ro&&Vo(mu)),t===u&&(r.substr(wo,5)===lr?(t=lr,wo+=5):(t=u,0===Ro&&Vo(du)),t===u&&(r.substr(wo,5)===fr?(t=fr,wo+=5):(t=u,0===Ro&&Vo(Au))))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"SetUp",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,3)===hr?(t=hr,wo+=3):(t=u,0===Ro&&Vo(gu)),t===u&&(r.substr(wo,3)===vr?(t=vr,wo+=3):(t=u,0===Ro&&Vo(Cu)),t===u&&(r.substr(wo,3)===pr?(t=pr,wo+=3):(t=u,0===Ro&&Vo(ku)))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"FEN",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,11)===br?(t=br,wo+=11):(t=u,0===Ro&&Vo(yu)),t===u&&(r.substr(wo,11)===mr?(t=mr,wo+=11):(t=u,0===Ro&&Vo(Bu))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Termination",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,9)===dr?(t=dr,wo+=9):(t=u,0===Ro&&Vo(Tu)),t===u&&(r.substr(wo,9)===Ar?(t=Ar,wo+=9):(t=u,0===Ro&&Vo(Eu))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Annotator",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,4)===gr?(t=gr,wo+=4):(t=u,0===Ro&&Vo(Wu)),t===u&&(r.substr(wo,4)===Cr?(t=Cr,wo+=4):(t=u,0===Ro&&Vo(Ou))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Mode",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=es())!==u?(e=ss(),(a=Cs())!==u?($o=t,t=function(t){return{name:"PlyCount",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,7)===Er?(t=Er,wo+=7):(t=u,0===Ro&&Vo(Nu)),t===u&&(r.substr(wo,7)===Wr?(t=Wr,wo+=7):(t=u,0===Ro&&Vo(Su))),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"Variant",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,15)===Or?(t=Or,wo+=15):(t=u,0===Ro&&Vo(Ru)),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"WhiteRatingDiff",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,15)===xr?(t=xr,wo+=15):(t=u,0===Ro&&Vo(ju)),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"BlackRatingDiff",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,11)===wr?(t=wr,wo+=11):(t=u,0===Ro&&Vo(Fu)),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"WhiteFideId",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,11)===$r?(t=$r,wo+=11):(t=u,0===Ro&&Vo(Du)),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"BlackFideId",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,9)===Ur?(t=Ur,wo+=9):(t=u,0===Ro&&Vo(Pu)),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"WhiteTeam",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t;return r.substr(wo,9)===Nr?(t=Nr,wo+=9):(t=u,0===Ro&&Vo(Iu)),t}())!==u?(e=ss(),(a=cs())!==u?($o=t,t=function(t){return{name:"BlackTeam",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=us())!==u?(e=ss(),(a=function(){var t,n;return t=wo,fs()!==u&&(n=function(){var t,n,e,a;return t=wo,(n=function(){var t;return 66===r.charCodeAt(wo)?(t="B",wo++):(t=u,0===Ro&&Vo(ra)),t===u&&(87===r.charCodeAt(wo)?(t="W",wo++):(t=u,0===Ro&&Vo(na)),t===u&&(78===r.charCodeAt(wo)?(t="N",wo++):(t=u,0===Ro&&Vo(ea)))),t}())!==u?(47===r.charCodeAt(wo)?(e=Pr,wo++):(e=u,0===Ro&&Vo(ta)),e!==u&&(a=ds())!==u?($o=t,o=n,s=a,t=o+"/"+s):(wo=t,t=u)):(wo=t,t=u),t;var o,s}())!==u&&fs()!==u?($o=t,t=n):(wo=t,t=u),t}())!==u?($o=t,t=function(t){return{name:"Clock",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=as())!==u?(e=ss(),(a=ms())!==u?($o=t,t=function(t){return{name:"WhiteClock",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=os())!==u?(e=ss(),(a=ms())!==u?($o=t,t=function(t){return{name:"BlackClock",value:t}}(a)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,n=wo,Ro++,e=Lo(),Ro--,e!==u?(wo=n,n=void 0):n=u,n!==u?(e=ls(),a=ss(),(o=cs())!==u?($o=t,t=function(t,r){return zs({key:t,value:r,message:`Format of tag: "${t}" not correct: "${r}"`}),{name:t,value:r}}(e,o)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,n=wo,Ro++,e=Lo(),Ro--,e===u?n=void 0:(wo=n,n=u),n!==u?(e=ls(),a=ss(),(o=cs())!==u?($o=t,t=function(t,r){return zs({key:t,value:r,message:`Tag: "${t}" not known: "${r}"`}),{name:t,value:r}}(e,o)):(wo=t,t=u)):(wo=t,t=u))))))))))))))))))))))))))))))))))))))))))))))))),t;var s}())!==u?(ss(),Ns()!==u?($o=t,t=n):(wo=t,t=u)):(wo=t,t=u)):(wo=t,t=u),t}function Lo(){var t;return(t=Ko())===u&&(t=Yo())===u&&(t=qo())===u&&(t=zo())===u&&(t=Ho())===u&&(t=Go())===u&&(t=Zo())===u&&(t=Jo())===u&&(t=Xo())===u&&(t=ts())===u&&(t=rs())===u&&(t=ns())===u&&(t=es())===u&&(t=us())===u&&(t=as())===u&&(t=os()),t}function Ko(){var t;return r.substr(wo,4)===h?(t=h,wo+=4):(t=u,0===Ro&&Vo(gn)),t===u&&(r.substr(wo,4)===v?(t=v,wo+=4):(t=u,0===Ro&&Vo(Cn))),t}function Go(){var t;return r.substr(wo,6)===C?(t=C,wo+=6):(t=u,0===Ro&&Vo(On)),t===u&&(r.substr(wo,6)===k?(t=k,wo+=6):(t=u,0===Ro&&Vo(xn))),t}function Yo(){var t;return r.substr(wo,8)===$?(t=$,wo+=8):(t=u,0===Ro&&Vo(Dn)),t===u&&(r.substr(wo,8)===U?(t=U,wo+=8):(t=u,0===Ro&&Vo(Pn)),t===u&&(r.substr(wo,8)===N?(t=N,wo+=8):(t=u,0===Ro&&Vo(In)),t===u&&(r.substr(wo,8)===S?(t=S,wo+=8):(t=u,0===Ro&&Vo(Vn)),t===u&&(r.substr(wo,8)===R?(t=R,wo+=8):(t=u,0===Ro&&Vo(Mn)))))),t}function qo(){var t;return r.substr(wo,8)===j?(t=j,wo+=8):(t=u,0===Ro&&Vo(_n)),t===u&&(r.substr(wo,8)===F?(t=F,wo+=8):(t=u,0===Ro&&Vo(Qn)),t===u&&(r.substr(wo,8)===D?(t=D,wo+=8):(t=u,0===Ro&&Vo(Ln)),t===u&&(r.substr(wo,8)===P?(t=P,wo+=8):(t=u,0===Ro&&Vo(Kn)),t===u&&(r.substr(wo,8)===I?(t=I,wo+=8):(t=u,0===Ro&&Vo(Gn)))))),t}function zo(){var t;return r.substr(wo,9)===V?(t=V,wo+=9):(t=u,0===Ro&&Vo(Yn)),t===u&&(r.substr(wo,9)===M?(t=M,wo+=9):(t=u,0===Ro&&Vo(qn)),t===u&&(r.substr(wo,9)===_?(t=_,wo+=9):(t=u,0===Ro&&Vo(zn)),t===u&&(r.substr(wo,9)===Q?(t=Q,wo+=9):(t=u,0===Ro&&Vo(Hn)),t===u&&(r.substr(wo,9)===L?(t=L,wo+=9):(t=u,0===Ro&&Vo(Zn)))))),t}function Ho(){var t;return r.substr(wo,9)===K?(t=K,wo+=9):(t=u,0===Ro&&Vo(Jn)),t===u&&(r.substr(wo,9)===G?(t=G,wo+=9):(t=u,0===Ro&&Vo(Xn)),t===u&&(r.substr(wo,9)===Y?(t=Y,wo+=9):(t=u,0===Ro&&Vo(te)),t===u&&(r.substr(wo,9)===q?(t=q,wo+=9):(t=u,0===Ro&&Vo(re)),t===u&&(r.substr(wo,9)===z?(t=z,wo+=9):(t=u,0===Ro&&Vo(ne)))))),t}function Zo(){var t;return r.substr(wo,9)===mt?(t=mt,wo+=9):(t=u,0===Ro&&Vo(Be)),t===u&&(r.substr(wo,9)===dt?(t=dt,wo+=9):(t=u,0===Ro&&Vo(Te)),t===u&&(r.substr(wo,9)===At?(t=At,wo+=9):(t=u,0===Ro&&Vo(Ee)),t===u&&(r.substr(wo,9)===gt?(t=gt,wo+=9):(t=u,0===Ro&&Vo(We))))),t}function Jo(){var t;return r.substr(wo,5)===xt?(t=xt,wo+=5):(t=u,0===Ro&&Vo(je)),t===u&&(r.substr(wo,5)===wt?(t=wt,wo+=5):(t=u,0===Ro&&Vo(Fe))),t}function Xo(){var t;return r.substr(wo,4)===Lt?(t=Lt,wo+=4):(t=u,0===Ro&&Vo(Ze)),t===u&&(r.substr(wo,4)===Kt?(t=Kt,wo+=4):(t=u,0===Ro&&Vo(Je))),t}function ts(){var t;return r.substr(wo,7)===Gt?(t=Gt,wo+=7):(t=u,0===Ro&&Vo(Xe)),t===u&&(r.substr(wo,7)===Yt?(t=Yt,wo+=7):(t=u,0===Ro&&Vo(tu)),t===u&&(r.substr(wo,7)===qt?(t=qt,wo+=7):(t=u,0===Ro&&Vo(ru)),t===u&&(r.substr(wo,7)===zt?(t=zt,wo+=7):(t=u,0===Ro&&Vo(nu)),t===u&&(r.substr(wo,7)===Ht?(t=Ht,wo+=7):(t=u,0===Ro&&Vo(eu)),t===u&&(r.substr(wo,7)===Zt?(t=Zt,wo+=7):(t=u,0===Ro&&Vo(uu))))))),t}function rs(){var t;return r.substr(wo,7)===Jt?(t=Jt,wo+=7):(t=u,0===Ro&&Vo(au)),t===u&&(r.substr(wo,7)===Xt?(t=Xt,wo+=7):(t=u,0===Ro&&Vo(ou)),t===u&&(r.substr(wo,7)===tr?(t=tr,wo+=7):(t=u,0===Ro&&Vo(su)),t===u&&(r.substr(wo,7)===rr?(t=rr,wo+=7):(t=u,0===Ro&&Vo(iu)),t===u&&(r.substr(wo,7)===nr?(t=nr,wo+=7):(t=u,0===Ro&&Vo(cu)),t===u&&(r.substr(wo,7)===er?(t=er,wo+=7):(t=u,0===Ro&&Vo(lu))))))),t}function ns(){var t;return r.substr(wo,11)===ur?(t=ur,wo+=11):(t=u,0===Ro&&Vo(fu)),t===u&&(r.substr(wo,11)===ar?(t=ar,wo+=11):(t=u,0===Ro&&Vo(hu)),t===u&&(r.substr(wo,11)===or?(t=or,wo+=11):(t=u,0===Ro&&Vo(vu)),t===u&&(r.substr(wo,11)===sr?(t=sr,wo+=11):(t=u,0===Ro&&Vo(pu))))),t}function es(){var t;return r.substr(wo,8)===kr?(t=kr,wo+=8):(t=u,0===Ro&&Vo(xu)),t===u&&(r.substr(wo,8)===yr?(t=yr,wo+=8):(t=u,0===Ro&&Vo(wu)),t===u&&(r.substr(wo,8)===Br?(t=Br,wo+=8):(t=u,0===Ro&&Vo($u)),t===u&&(r.substr(wo,8)===Tr?(t=Tr,wo+=8):(t=u,0===Ro&&Vo(Uu))))),t}function us(){var t;return r.substr(wo,5)===Sr?(t=Sr,wo+=5):(t=u,0===Ro&&Vo(Vu)),t}function as(){var t;return r.substr(wo,10)===Rr?(t=Rr,wo+=10):(t=u,0===Ro&&Vo(Mu)),t}function os(){var t;return r.substr(wo,10)===jr?(t=jr,wo+=10):(t=u,0===Ro&&Vo(_u)),t}function ss(){var t,n;for(Ro++,t=[],un.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Lu));n!==u;)t.push(n),un.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Lu));return Ro--,n=u,0===Ro&&Vo(Qu),t}function is(){var t,n;if(t=[],un.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Lu)),n!==u)for(;n!==u;)t.push(n),un.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Lu));else t=u;return t}function cs(){var t,r,n;if(Ro++,t=wo,fs()!==u){for(r=[],n=hs();n!==u;)r.push(n),n=hs();(n=fs())!==u?($o=t,t=mo(r)):(wo=t,t=u)}else wo=t,t=u;return Ro--,t===u&&0===Ro&&Vo(Gu),t}function ls(){var t,n,e;for(t=wo,n=[],on.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Yu));e!==u;)n.push(e),on.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Yu));return $o=t,mo(n)}function fs(){var t;return 34===r.charCodeAt(wo)?(t='"',wo++):(t=u,0===Ro&&Vo(qu)),t}function hs(){var t,n,e;return t=wo,n=wo,Ro++,e=fs(),Ro--,e===u?n=void 0:(wo=n,n=u),n!==u?(r.length>wo?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(zu)),e!==u?($o=t,t=e):(wo=t,t=u)):(wo=t,t=u),t}function vs(){var t,n,e,a,o,s,i,c,l,f,h;return t=wo,fs()!==u?(n=wo,sn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Hu)),e!==u?(sn.test(r.charAt(wo))?(a=r.charAt(wo),wo++):(a=u,0===Ro&&Vo(Hu)),a!==u?(sn.test(r.charAt(wo))?(o=r.charAt(wo),wo++):(o=u,0===Ro&&Vo(Hu)),o!==u?(sn.test(r.charAt(wo))?(s=r.charAt(wo),wo++):(s=u,0===Ro&&Vo(Hu)),s!==u?n=e=[e,a,o,s]:(wo=n,n=u)):(wo=n,n=u)):(wo=n,n=u)):(wo=n,n=u),n!==u?(46===r.charCodeAt(wo)?(e=Fr,wo++):(e=u,0===Ro&&Vo(Zu)),e!==u?(a=wo,sn.test(r.charAt(wo))?(o=r.charAt(wo),wo++):(o=u,0===Ro&&Vo(Hu)),o!==u?(sn.test(r.charAt(wo))?(s=r.charAt(wo),wo++):(s=u,0===Ro&&Vo(Hu)),s!==u?a=o=[o,s]:(wo=a,a=u)):(wo=a,a=u),a!==u?(46===r.charCodeAt(wo)?(o=Fr,wo++):(o=u,0===Ro&&Vo(Zu)),o!==u?(s=wo,sn.test(r.charAt(wo))?(i=r.charAt(wo),wo++):(i=u,0===Ro&&Vo(Hu)),i!==u?(sn.test(r.charAt(wo))?(c=r.charAt(wo),wo++):(c=u,0===Ro&&Vo(Hu)),c!==u?s=i=[i,c]:(wo=s,s=u)):(wo=s,s=u),s!==u&&(i=fs())!==u?($o=t,f=a,h=s,t={value:(l=n).join("")+"."+f.join("")+"."+h.join(""),year:Zs(l),month:Zs(f),day:Zs(h)}):(wo=t,t=u)):(wo=t,t=u)):(wo=t,t=u)):(wo=t,t=u)):(wo=t,t=u)):(wo=t,t=u),t}function ps(){var t,n,e,a,o,s,i;if(t=wo,fs()!==u){if(n=[],cn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Ju)),e!==u)for(;e!==u;)n.push(e),cn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Ju));else n=u;if(n!==u)if(58===r.charCodeAt(wo)?(e=Dr,wo++):(e=u,0===Ro&&Vo(Xu)),e!==u){if(a=[],cn.test(r.charAt(wo))?(o=r.charAt(wo),wo++):(o=u,0===Ro&&Vo(Ju)),o!==u)for(;o!==u;)a.push(o),cn.test(r.charAt(wo))?(o=r.charAt(wo),wo++):(o=u,0===Ro&&Vo(Ju));else a=u;if(a!==u)if(58===r.charCodeAt(wo)?(o=Dr,wo++):(o=u,0===Ro&&Vo(Xu)),o!==u){if(s=[],cn.test(r.charAt(wo))?(i=r.charAt(wo),wo++):(i=u,0===Ro&&Vo(Ju)),i!==u)for(;i!==u;)s.push(i),cn.test(r.charAt(wo))?(i=r.charAt(wo),wo++):(i=u,0===Ro&&Vo(Ju));else s=u;s!==u?((i=bs())===u&&(i=null),fs()!==u?($o=t,t=function(t,r,n,e){let u=t.join("")+":"+r.join("")+":"+n.join("");return e&&(u=u+"."+e,zs({message:`Unusual use of millis in time: ${u}`}),Zs(e)),{value:u,hour:Zs(t),minute:Zs(r),second:Zs(n),millis:0}}(n,a,s,i)):(wo=t,t=u)):(wo=t,t=u)}else wo=t,t=u;else wo=t,t=u}else wo=t,t=u;else wo=t,t=u}else wo=t,t=u;return t}function bs(){var t,n,e,a;if(t=wo,46===r.charCodeAt(wo)?(n=Fr,wo++):(n=u,0===Ro&&Vo(Zu)),n!==u){if(e=[],cn.test(r.charAt(wo))?(a=r.charAt(wo),wo++):(a=u,0===Ro&&Vo(Ju)),a!==u)for(;a!==u;)e.push(a),cn.test(r.charAt(wo))?(a=r.charAt(wo),wo++):(a=u,0===Ro&&Vo(Ju));else e=u;e!==u?($o=t,t=e.join("")):(wo=t,t=u)}else wo=t,t=u;return t}function ms(){var t,r;return t=wo,fs()!==u&&(r=ds())!==u&&fs()!==u?($o=t,t=r):(wo=t,t=u),t}function ds(){var t,r;return t=wo,(r=Ss())!==u&&($o=t,r=r),r}function As(){var t,n;return t=wo,"1-0"===r.substr(wo,3)?(n="1-0",wo+=3):(n=u,0===Ro&&Vo(ia)),n!==u&&($o=t,n=n),(t=n)===u&&(t=wo,"0-1"===r.substr(wo,3)?(n="0-1",wo+=3):(n=u,0===Ro&&Vo(ca)),n!==u&&($o=t,n=n),(t=n)===u&&(t=wo,r.substr(wo,7)===Mr?(n=Mr,wo+=7):(n=u,0===Ro&&Vo(la)),n!==u&&($o=t,n=n),(t=n)===u&&(t=wo,42===r.charCodeAt(wo)?(n="*",wo++):(n=u,0===Ro&&Vo(sa)),n!==u&&($o=t,n=n),t=n))),t}function gs(){var t,n,e,a;return(t=Cs())===u&&(t=wo,(n=fs())!==u?(45===r.charCodeAt(wo)?(e=Vr,wo++):(e=u,0===Ro&&Vo(aa)),e!==u&&(a=fs())!==u?t=n=[n,e,a]:(wo=t,t=u)):(wo=t,t=u)),t}function Cs(){var t,n,e;if(t=wo,fs()!==u){if(n=[],cn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Ju)),e!==u)for(;e!==u;)n.push(e),cn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Ju));else n=u;n!==u&&(e=fs())!==u?($o=t,t=Ao(n)):(wo=t,t=u)}else wo=t,t=u;return t}function ks(){var t,n,e,a,o,s,i,c,l,f,h,v,p,b,m;return t=wo,ss(),(n=ys())===u&&(n=null),ss(),(e=function(){var t,r,n,e,a;if(t=wo,(r=Ps())!==u){for(n=[],e=Is();e!==u;)n.push(e),e=Is();for(e=[],a=Ds();a!==u;)e.push(a),a=Ds();$o=t,t=r}else wo=t,t=u;return t}())===u&&(e=null),ss(),(a=function(){var t,n,e,a,o,s,i,c,l;return t=wo,(n=Ls())===u&&(n=null),e=wo,Ro++,a=function(){var t,r,n,e,a;return t=wo,(r=Qs())!==u?((n=Ys())===u&&(n=null),(e=Ks())!==u&&(a=Gs())!==u?t=r=[r,n,e,a]:(wo=t,t=u)):(wo=t,t=u),t}(),Ro--,a!==u?(wo=e,e=void 0):e=u,e!==u&&(a=Qs())!==u?((o=Ys())===u&&(o=null),(s=Ks())!==u&&(i=Gs())!==u?((c=Ms())===u&&(c=null),(l=Vs())===u&&(l=null),$o=t,f=n,h=a,v=o,p=s,b=i,m=c,d=l,A={},A.fig=f||null,A.disc=h||null,A.strike=v||null,A.col=p,A.row=b,A.check=d||null,A.promotion=m,A.notation=(f||"")+(h||"")+(v||"")+p+b+(m||"")+(d||""),t=A):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Ls())===u&&(n=null),(e=Ks())!==u&&(a=Gs())!==u?((o=function(){var t;return 120===r.charCodeAt(wo)?(t="x",wo++):(t=u,0===Ro&&Vo(po)),t===u&&(45===r.charCodeAt(wo)?(t=Vr,wo++):(t=u,0===Ro&&Vo(aa))),t}())===u&&(o=null),(s=Ks())!==u&&(i=Gs())!==u?((c=Ms())===u&&(c=null),(l=Vs())===u&&(l=null),$o=t,t=function(t,r,n,e,u,a,o,s){var i={};return i.fig=t||null,i.strike="x"==e?e:null,i.col=u,i.row=a,i.notation=(t&&"P"!==t?t:"")+r+n+("x"==e?e:"-")+u+a+(o||"")+(s||""),i.check=s||null,i.promotion=o,i}(n,e,a,o,s,i,c,l)):(wo=t,t=u)):(wo=t,t=u),t===u&&(t=wo,(n=Ls())===u&&(n=null),(e=Ys())===u&&(e=null),(a=Ks())!==u&&(o=Gs())!==u?((s=Ms())===u&&(s=null),(i=Vs())===u&&(i=null),$o=t,t=function(t,r,n,e,u,a){var o={};return o.fig=t||null,o.strike=r||null,o.col=n,o.row=e,o.check=a||null,o.promotion=u,o.notation=(t||"")+(r||"")+n+e+(u||"")+(a||""),o}(n,e,a,o,s,i)):(wo=t,t=u),t===u&&(t=wo,r.substr(wo,5)===Hr?(n=Hr,wo+=5):(n=u,0===Ro&&Vo(Ra)),n!==u?((e=Vs())===u&&(e=null),$o=t,t=function(t){var r={};return r.notation="O-O-O"+(t||""),r.check=t||null,r}(e)):(wo=t,t=u),t===u&&(t=wo,r.substr(wo,3)===Zr?(n=Zr,wo+=3):(n=u,0===Ro&&Vo(ja)),n!==u?((e=Vs())===u&&(e=null),$o=t,t=function(t){var r={};return r.notation="O-O"+(t||""),r.check=t||null,r}(e)):(wo=t,t=u),t===u&&(t=wo,(n=Ls())!==u?(64===r.charCodeAt(wo)?(e="@",wo++):(e=u,0===Ro&&Vo(Fa)),e!==u&&(a=Ks())!==u&&(o=Gs())!==u?($o=t,t=function(t,r,n){var e={};return e.fig=t,e.drop=!0,e.col=r,e.row=n,e.notation=t+"@"+r+n,e}(n,a,o)):(wo=t,t=u)):(wo=t,t=u)))))),t;var f,h,v,p,b,m,d,A}())!==u?(ss(),(o=_s())===u&&(o=null),ss(),(s=ys())===u&&(s=null),ss(),(i=Fs())===u&&(i=null),(c=ks())===u&&(c=null),$o=t,l=n,f=a,h=o,v=s,p=i,b=c||[],(m={}).moveNumber=e,m.notation=f,v&&(m.commentAfter=v.comment),l&&(m.commentMove=l.comment),m.variations=p||[],m.nag=h||null,b.unshift(m),m.commentDiag=v,t=b):(wo=t,t=u),t===u&&(t=wo,ss(),(n=function(){var t,r;return t=wo,(r=As())!==u&&($o=t,n=r,r=[n]),r;var n}())!==u?(ss(),$o=t,t=n):(wo=t,t=u)),t}function ys(){var t,r,n,e,a;if(t=wo,(r=Bs())!==u){for(n=[],e=wo,ss(),(a=Bs())!==u?($o=e,e=go(0,a)):(wo=e,e=u);e!==u;)n.push(e),e=wo,ss(),(a=Bs())!==u?($o=e,e=go(0,a)):(wo=e,e=u);$o=t,t=Js([r].concat(n))}else wo=t,t=u;return t}function Bs(){var t,n,e;return t=wo,(n=function(){var t;return 123===r.charCodeAt(wo)?(t="{",wo++):(t=u,0===Ro&&Vo(ya)),t}())!==u&&(e=Ts())!==u&&function(){var t;return 125===r.charCodeAt(wo)?(t="}",wo++):(t=u,0===Ro&&Vo(ma)),t}()!==u?($o=t,t=e):(wo=t,t=u),t===u&&(t=wo,(n=function(){var t,n,e;if(t=wo,function(){var t;return 59===r.charCodeAt(wo)?(t=";",wo++):(t=u,0===Ro&&Vo(Ea)),t}()!==u){for(n=[],ln.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(da));e!==u;)n.push(e),ln.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(da));(e=function(){var t,n;if(t=[],an.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Ku)),n!==u)for(;n!==u;)t.push(n),an.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Ku));else t=u;return t}())!==u?($o=t,t=n.join("")):(wo=t,t=u)}else wo=t,t=u;return t}())!==u&&($o=t,n={comment:n}),t=n),t}function Ts(){var t,n,e,a,o,s,i,c,l,f,h,v;if(t=wo,n=ss(),(e=Us())!==u)if(r.substr(wo,4)===_r?(a=_r,wo+=4):(a=u,0===Ro&&Vo(fa)),a!==u)if((o=is())!==u)if((s=function(){var t,n,e,a,o,s,i;if(t=wo,(n=Os())!==u){for(ss(),e=[],a=wo,44===r.charCodeAt(wo)?(o=Kr,wo++):(o=u,0===Ro&&Vo(Aa)),o!==u?(s=ss(),(i=Os())!==u?a=o=[o,s,i]:(wo=a,a=u)):(wo=a,a=u);a!==u;)e.push(a),a=wo,44===r.charCodeAt(wo)?(o=Kr,wo++):(o=u,0===Ro&&Vo(Aa)),o!==u?(s=ss(),(i=Os())!==u?a=o=[o,s,i]:(wo=a,a=u)):(wo=a,a=u);$o=t,t=Oo(n,e)}else wo=t,t=u;return t}())!==u)if(i=ss(),(c=Ns())!==u){for(ss(),l=[],f=wo,(h=Ts())!==u&&($o=f,h=Co(0,h)),f=h;f!==u;)l.push(f),f=wo,(h=Ts())!==u&&($o=f,h=Co(0,h)),f=h;$o=t,t=Js([{colorFields:s}].concat(l[0]))}else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;if(t===u){if(t=wo,n=ss(),(e=Us())!==u)if(r.substr(wo,4)===Qr?(a=Qr,wo+=4):(a=u,0===Ro&&Vo(ha)),a!==u)if((o=is())!==u)if((s=function(){var t,n,e,a,o,s,i;if(t=wo,(n=xs())!==u){for(ss(),e=[],a=wo,44===r.charCodeAt(wo)?(o=Kr,wo++):(o=u,0===Ro&&Vo(Aa)),o!==u?(s=ss(),(i=xs())!==u?a=o=[o,s,i]:(wo=a,a=u)):(wo=a,a=u);a!==u;)e.push(a),a=wo,44===r.charCodeAt(wo)?(o=Kr,wo++):(o=u,0===Ro&&Vo(Aa)),o!==u?(s=ss(),(i=xs())!==u?a=o=[o,s,i]:(wo=a,a=u)):(wo=a,a=u);$o=t,t=Oo(n,e)}else wo=t,t=u;return t}())!==u)if(i=ss(),(c=Ns())!==u){for(ss(),l=[],f=wo,(h=Ts())!==u&&($o=f,h=ko(0,h)),f=h;f!==u;)l.push(f),f=wo,(h=Ts())!==u&&($o=f,h=ko(0,h)),f=h;$o=t,t=function(t,r){return Js([{colorArrows:t}].concat(r[0]))}(s,l)}else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;if(t===u){if(t=wo,n=ss(),(e=Us())!==u)if(37===r.charCodeAt(wo)?(a="%",wo++):(a=u,0===Ro&&Vo(va)),a!==u)if((o=function(){var t,n;return t=wo,r.substr(wo,3)===Gr?(n=Gr,wo+=3):(n=u,0===Ro&&Vo(Wa)),n!==u&&($o=t,n="clk"),(t=n)===u&&(t=wo,r.substr(wo,3)===Yr?(n=Yr,wo+=3):(n=u,0===Ro&&Vo(Oa)),n!==u&&($o=t,n="egt"),(t=n)===u&&(t=wo,r.substr(wo,3)===qr?(n=qr,wo+=3):(n=u,0===Ro&&Vo(xa)),n!==u&&($o=t,n="emt"),t=n)),t}())!==u)if((s=is())!==u)if((i=Ss())!==u)if(c=ss(),Ns()!==u){for(l=ss(),f=[],h=wo,(v=Ts())!==u&&($o=h,v=yo(0,0,v)),h=v;h!==u;)f.push(h),h=wo,(v=Ts())!==u&&($o=h,v=yo(0,0,v)),h=v;$o=t,t=Bo(o,i,f)}else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;if(t===u){if(t=wo,n=ss(),(e=Us())!==u)if(37===r.charCodeAt(wo)?(a="%",wo++):(a=u,0===Ro&&Vo(va)),a!==u)if((o=function(){var t,n;return t=wo,r.substr(wo,3)===zr?(n=zr,wo+=3):(n=u,0===Ro&&Vo(wa)),n!==u&&($o=t,n="mct"),n}())!==u)if((s=is())!==u)if((i=function(){var t,r,n,e;return t=wo,(r=Rs())===u&&(r=null),(n=js())!==u?((e=js())===u&&(e=null),$o=t,t=function(t,r,n){let e=r;return t?e=t+e:zs({message:"Hours and minutes missing"}),t&&2==(t.match(/:/g)||[]).length&&1==t.search(":")&&zs({message:"Only 2 digits for hours normally used"}),n?e+=n:zs({message:"Only 2 digit for seconds normally used"}),e}(r,n,e)):(wo=t,t=u),t}())!==u)if(c=ss(),Ns()!==u){for(l=ss(),f=[],h=wo,(v=Ts())!==u&&($o=h,v=yo(0,0,v)),h=v;h!==u;)f.push(h),h=wo,(v=Ts())!==u&&($o=h,v=yo(0,0,v)),h=v;$o=t,t=Bo(o,i,f)}else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;if(t===u){if(t=wo,n=ss(),(e=Us())!==u)if(r.substr(wo,5)===Lr?(a=Lr,wo+=5):(a=u,0===Ro&&Vo(pa)),a!==u)if((o=is())!==u)if(s=ls(),i=ss(),(c=Ns())!==u){for(ss(),l=[],f=wo,(h=Ts())!==u&&($o=f,h=To(0,h)),f=h;f!==u;)l.push(f),f=wo,(h=Ts())!==u&&($o=f,h=To(0,h)),f=h;$o=t,t=function(t,r){var n={};return n.eval=parseFloat(t),Js([n].concat(r[0]))}(s,l)}else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;if(t===u){if(t=wo,n=ss(),(e=Us())!==u)if(37===r.charCodeAt(wo)?(a="%",wo++):(a=u,0===Ro&&Vo(va)),a!==u)if(o=ls(),(s=is())!==u){if(i=[],(c=Ws())!==u)for(;c!==u;)i.push(c),c=Ws();else i=u;if(i!==u)if((c=Ns())!==u){for(ss(),l=[],f=wo,(h=Ts())!==u&&($o=f,h=Eo(0,0,h)),f=h;f!==u;)l.push(f),f=wo,(h=Ts())!==u&&($o=f,h=Eo(0,0,h)),f=h;$o=t,t=function(t,r,n){var e={};return e[t]=r.join(""),Js([e].concat(n[0]))}(o,i,l)}else wo=t,t=u;else wo=t,t=u}else wo=t,t=u;else wo=t,t=u;else wo=t,t=u;if(t===u){if(t=wo,n=[],(e=Es())!==u)for(;e!==u;)n.push(e),e=Es();else n=u;if(n!==u){for(e=[],a=wo,o=ss(),(s=Ts())!==u?($o=a,a=Wo(0,s)):(wo=a,a=u);a!==u;)e.push(a),a=wo,o=ss(),(s=Ts())!==u?($o=a,a=Wo(0,s)):(wo=a,a=u);$o=t,t=function(t,r){return r.length>0?Js([{comment:ti(t.join(""))}].concat(Xs(r[0]))):{comment:t.join("")}}(n,e)}else wo=t,t=u}}}}}}return t}function Es(){var t,n,e,a;return t=wo,n=wo,Ro++,"[%"===r.substr(wo,2)?(e="[%",wo+=2):(e=u,0===Ro&&Vo(ba)),Ro--,e===u?n=void 0:(wo=n,n=u),n!==u?(e=wo,Ro++,125===r.charCodeAt(wo)?(a="}",wo++):(a=u,0===Ro&&Vo(ma)),Ro--,a===u?e=void 0:(wo=e,e=u),e!==u?(r.length>wo?(a=r.charAt(wo),wo++):(a=u,0===Ro&&Vo(zu)),a!==u?($o=t,t=a):(wo=t,t=u)):(wo=t,t=u)):(wo=t,t=u),t}function Ws(){var t,n,e;return t=wo,n=wo,Ro++,e=Ns(),Ro--,e===u?n=void 0:(wo=n,n=u),n!==u?(r.length>wo?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(zu)),e!==u?($o=t,t=e):(wo=t,t=u)):(wo=t,t=u),t}function Os(){var t,r,n;return t=wo,(r=ws())!==u&&(n=$s())!==u?($o=t,t=r+n):(wo=t,t=u),t}function xs(){var t,r,n,e;return t=wo,(r=ws())!==u&&(n=$s())!==u&&(e=$s())!==u?($o=t,t=r+n+e):(wo=t,t=u),t}function ws(){var t,n;return t=wo,89===r.charCodeAt(wo)?(n="Y",wo++):(n=u,0===Ro&&Vo(ga)),n!==u&&($o=t,n="Y"),(t=n)===u&&(t=wo,71===r.charCodeAt(wo)?(n="G",wo++):(n=u,0===Ro&&Vo(Ca)),n!==u&&($o=t,n="G"),(t=n)===u&&(t=wo,82===r.charCodeAt(wo)?(n="R",wo++):(n=u,0===Ro&&Vo(ka)),n!==u&&($o=t,n="R"),(t=n)===u&&(t=wo,66===r.charCodeAt(wo)?(n="B",wo++):(n=u,0===Ro&&Vo(ra)),n!==u&&($o=t,n="B"),t=n))),t}function $s(){var t,r,n;return t=wo,(r=Ks())!==u&&(n=Gs())!==u?($o=t,t=r+n):(wo=t,t=u),t}function Us(){var t;return 91===r.charCodeAt(wo)?(t="[",wo++):(t=u,0===Ro&&Vo(Ba)),t}function Ns(){var t;return 93===r.charCodeAt(wo)?(t="]",wo++):(t=u,0===Ro&&Vo(Ta)),t}function Ss(){var t,r,n,e,a;return t=wo,(r=Rs())===u&&(r=null),(n=js())!==u?((e=js())===u&&(e=null),(a=bs())===u&&(a=null),$o=t,t=function(t,r,n,e){let u=r;return t?u=t+u:zs({message:"Hours and minutes missing"}),t&&2==(t.match(/:/g)||[]).length&&2==t.search(":")&&zs({message:"Only 1 digit for hours normally used"}),n?u+=n:zs({message:"Only 2 digit for seconds normally used"}),e&&(zs({message:"Unusual use of millis in clock value"}),u+="."+e),u}(r,n,e,a)):(wo=t,t=u),t}function Rs(){var t,n,e,a,o;return t=wo,(n=function(){var t,n,e,a;return t=wo,(n=js())!==u?((e=js())===u&&(e=null),58===r.charCodeAt(wo)?(a=Dr,wo++):(a=u,0===Ro&&Vo(Xu)),a!==u?($o=t,t=function(t,r){let n=t;return n+=r?r+":":":",n}(n,e)):(wo=t,t=u)):(wo=t,t=u),t}())!==u?((e=function(){var t,n,e,a;return t=wo,(n=js())!==u?((e=js())===u&&(e=null),58===r.charCodeAt(wo)?(a=Dr,wo++):(a=u,0===Ro&&Vo(Xu)),a!==u?($o=t,t=function(t,r){let n=t;return r?n+=r+":":(n+=":",zs({message:"Only 2 digits for minutes normally used"})),n}(n,e)):(wo=t,t=u)):(wo=t,t=u),t}())===u&&(e=null),$o=t,a=n,t=(o=e)?a+o:(zs({message:"No hours found"}),a)):(wo=t,t=u),t}function js(){var t,n;return t=wo,cn.test(r.charAt(wo))?(n=r.charAt(wo),wo++):(n=u,0===Ro&&Vo(Ju)),n!==u&&($o=t,n=n),n}function Fs(){var t,n,e,a,o;return t=wo,function(){var t;return 40===r.charCodeAt(wo)?(t="(",wo++):(t=u,0===Ro&&Vo($a)),t}()!==u&&(n=ks())!==u&&function(){var t;return 41===r.charCodeAt(wo)?(t=")",wo++):(t=u,0===Ro&&Vo(Ua)),t}()!==u?(ss(),(e=Fs())===u&&(e=null),$o=t,a=n,(o=e||[]).unshift(a),t=o):(wo=t,t=u),t}function Ds(){var t;return 46===r.charCodeAt(wo)?(t=Fr,wo++):(t=u,0===Ro&&Vo(Zu)),t}function Ps(){var t,n,e;if(Ro++,t=wo,n=[],cn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Ju)),e!==u)for(;e!==u;)n.push(e),cn.test(r.charAt(wo))?(e=r.charAt(wo),wo++):(e=u,0===Ro&&Vo(Ju));else n=u;return n!==u&&($o=t,n=Ao(n)),Ro--,(t=n)===u&&(n=u,0===Ro&&Vo(Na)),t}function Is(){var t,n,e;if(t=wo,n=[],32===r.charCodeAt(wo)?(e=" ",wo++):(e=u,0===Ro&&Vo(Sa)),e!==u)for(;e!==u;)n.push(e),32===r.charCodeAt(wo)?(e=" ",wo++):(e=u,0===Ro&&Vo(Sa));else n=u;return n!==u&&($o=t,n=""),n}function Vs(){var t,n,e,a;return t=wo,n=wo,e=wo,Ro++,r.substr(wo,2)===Jr?(a=Jr,wo+=2):(a=u,0===Ro&&Vo(Da)),Ro--,a===u?e=void 0:(wo=e,e=u),e!==u?(43===r.charCodeAt(wo)?(a="+",wo++):(a=u,0===Ro&&Vo(oa)),a!==u?n=e=[e,a]:(wo=n,n=u)):(wo=n,n=u),n!==u&&($o=t,n=xo(n)),(t=n)===u&&(t=wo,n=wo,e=wo,Ro++,"$$$"===r.substr(wo,3)?(a="$$$",wo+=3):(a=u,0===Ro&&Vo(Pa)),Ro--,a===u?e=void 0:(wo=e,e=u),e!==u?(35===r.charCodeAt(wo)?(a="#",wo++):(a=u,0===Ro&&Vo(Ia)),a!==u?n=e=[e,a]:(wo=n,n=u)):(wo=n,n=u),n!==u&&($o=t,n=xo(n)),t=n),t}function Ms(){var t,n,e;return t=wo,61===r.charCodeAt(wo)?(n="=",wo++):(n=u,0===Ro&&Vo(Va)),n!==u&&(e=function(){var t;return hn.test(r.charAt(wo))?(t=r.charAt(wo),wo++):(t=u,0===Ro&&Vo(fo)),t}())!==u?($o=t,t="="+e):(wo=t,t=u),t}function _s(){var t,n,e,a,o;return t=wo,(n=function(){var t,n,e;return t=wo,36===r.charCodeAt(wo)?(n="$",wo++):(n=u,0===Ro&&Vo(Ma)),n!==u&&(e=Ps())!==u?($o=t,a=e,t="$"+a):(wo=t,t=u),t===u&&(t=wo,r.substr(wo,2)===Xr?(n=Xr,wo+=2):(n=u,0===Ro&&Vo(_a)),n!==u&&($o=t,n="$3"),(t=n)===u&&(t=wo,r.substr(wo,2)===tn?(n=tn,wo+=2):(n=u,0===Ro&&Vo(Qa)),n!==u&&($o=t,n="$4"),(t=n)===u&&(t=wo,r.substr(wo,2)===rn?(n=rn,wo+=2):(n=u,0===Ro&&Vo(La)),n!==u&&($o=t,n="$5"),(t=n)===u&&(t=wo,r.substr(wo,2)===nn?(n=nn,wo+=2):(n=u,0===Ro&&Vo(Ka)),n!==u&&($o=t,n="$6"),(t=n)===u&&(t=wo,33===r.charCodeAt(wo)?(n="!",wo++):(n=u,0===Ro&&Vo(Ga)),n!==u&&($o=t,n="$1"),(t=n)===u&&(t=wo,63===r.charCodeAt(wo)?(n=Ir,wo++):(n=u,0===Ro&&Vo(ua)),n!==u&&($o=t,n="$2"),(t=n)===u&&(t=wo,8252===r.charCodeAt(wo)?(n="‼",wo++):(n=u,0===Ro&&Vo(Ya)),n!==u&&($o=t,n="$3"),(t=n)===u&&(t=wo,8263===r.charCodeAt(wo)?(n="⁇",wo++):(n=u,0===Ro&&Vo(qa)),n!==u&&($o=t,n="$4"),(t=n)===u&&(t=wo,8265===r.charCodeAt(wo)?(n="⁉",wo++):(n=u,0===Ro&&Vo(za)),n!==u&&($o=t,n="$5"),(t=n)===u&&(t=wo,8264===r.charCodeAt(wo)?(n="⁈",wo++):(n=u,0===Ro&&Vo(Ha)),n!==u&&($o=t,n="$6"),(t=n)===u&&(t=wo,9633===r.charCodeAt(wo)?(n="□",wo++):(n=u,0===Ro&&Vo(Za)),n!==u&&($o=t,n="$7"),(t=n)===u&&(t=wo,61===r.charCodeAt(wo)?(n="=",wo++):(n=u,0===Ro&&Vo(Va)),n!==u&&($o=t,n="$10"),(t=n)===u&&(t=wo,8734===r.charCodeAt(wo)?(n="∞",wo++):(n=u,0===Ro&&Vo(Ja)),n!==u&&($o=t,n="$13"),(t=n)===u&&(t=wo,10866===r.charCodeAt(wo)?(n="⩲",wo++):(n=u,0===Ro&&Vo(Xa)),n!==u&&($o=t,n="$14"),(t=n)===u&&(t=wo,10865===r.charCodeAt(wo)?(n="⩱",wo++):(n=u,0===Ro&&Vo(to)),n!==u&&($o=t,n="$15"),(t=n)===u&&(t=wo,177===r.charCodeAt(wo)?(n="±",wo++):(n=u,0===Ro&&Vo(ro)),n!==u&&($o=t,n="$16"),(t=n)===u&&(t=wo,8723===r.charCodeAt(wo)?(n="∓",wo++):(n=u,0===Ro&&Vo(no)),n!==u&&($o=t,n="$17"),(t=n)===u&&(t=wo,r.substr(wo,2)===Jr?(n=Jr,wo+=2):(n=u,0===Ro&&Vo(Da)),n!==u&&($o=t,n="$18"),(t=n)===u&&(t=wo,r.substr(wo,2)===en?(n=en,wo+=2):(n=u,0===Ro&&Vo(eo)),n!==u&&($o=t,n="$19"),(t=n)===u&&(t=wo,10752===r.charCodeAt(wo)?(n="⨀",wo++):(n=u,0===Ro&&Vo(uo)),n!==u&&($o=t,n="$22"),(t=n)===u&&(t=wo,10227===r.charCodeAt(wo)?(n="⟳",wo++):(n=u,0===Ro&&Vo(ao)),n!==u&&($o=t,n="$32"),(t=n)===u&&(t=wo,8594===r.charCodeAt(wo)?(n="→",wo++):(n=u,0===Ro&&Vo(oo)),n!==u&&($o=t,n="$36"),(t=n)===u&&(t=wo,8593===r.charCodeAt(wo)?(n="↑",wo++):(n=u,0===Ro&&Vo(so)),n!==u&&($o=t,n="$40"),(t=n)===u&&(t=wo,8646===r.charCodeAt(wo)?(n="⇆",wo++):(n=u,0===Ro&&Vo(io)),n!==u&&($o=t,n="$132"),(t=n)===u&&(t=wo,68===r.charCodeAt(wo)?(n="D",wo++):(n=u,0===Ro&&Vo(co)),n!==u&&($o=t,n="$220"),t=n))))))))))))))))))))))))),t;var a}())!==u?(ss(),(e=_s())===u&&(e=null),$o=t,a=n,(o=e||[]).unshift(a),t=o):(wo=t,t=u),t}function Qs(){var t;return(t=Ks())===u&&(t=Gs()),t}function Ls(){var t;return fn.test(r.charAt(wo))?(t=r.charAt(wo),wo++):(t=u,0===Ro&&Vo(lo)),t}function Ks(){var t;return vn.test(r.charAt(wo))?(t=r.charAt(wo),wo++):(t=u,0===Ro&&Vo(ho)),t}function Gs(){var t;return pn.test(r.charAt(wo))?(t=r.charAt(wo),wo++):(t=u,0===Ro&&Vo(vo)),t}function Ys(){var t;return 120===r.charCodeAt(wo)?(t="x",wo++):(t=u,0===Ro&&Vo(po)),t}var qs=[];function zs(t){var r=Object.assign(t,Io($o,wo));return qs.push(r),r}function Hs(t){return parseInt(t.join(""),10)}function Zs(t){return t.join("").match(/\?/)?t.join(""):Hs(t)}function Js(t){var r={};return t.forEach((function(t){for(var n in t)Array.isArray(t[n])?r[n]=r[n]?r[n].concat(t[n]):t[n]:r[n]=r[n]?ti(r[n])+" "+Xs(t[n]):t[n]})),r}function Xs(t){if("string"!=typeof t)return t;return t.replace(/^\s+/,"")}function ti(t){if("string"!=typeof t)return t;return t.replace(/\s+$/,"")}if((e=s())!==u&&wo===r.length)return e;throw e!==u&&wo<r.length&&Vo({type:"end"}),function(r,n,e){return new t(t.buildMessage(r,n),r,n,e)}(So,No<r.length?r.charAt(No):null,No<r.length?Io(No,No+1):Io(No,No))}}})?n.apply(r,[]):n)||(t.exports=e)},607:(t,r,n)=>{var e,u,a;!function(o){if("object"==typeof t.exports){var s=o(n(875),r);void 0!==s&&(t.exports=s)}else u=[n,r,n(715),n(635)],void 0===(a="function"==typeof(e=o)?e.apply(r,u):e)||(t.exports=a)}((function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=r.split=void 0;var n=t("./split-games");Object.defineProperty(r,"split",{enumerable:!0,get:function(){return n.split}});var e=t("./pgn-parser");Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return e.parse}})}))},635:(t,r,n)=>{var e,u,a;!function(o){if("object"==typeof t.exports){var s=o(n(875),r);void 0!==s&&(t.exports=s)}else u=[n,r,n(678)],void 0===(a="function"==typeof(e=o)?e.apply(r,u):e)||(t.exports=a)}((function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=void 0;const n=t("./_pgn-parser.js");r.parse=function(t,r){r&&"pgn"!==r.startRule&&"game"!==r.startRule||(t=t.trim());let e=n.parse(t,r);return"pgn"===r.startRule?e={moves:e}:"tags"===r.startRule&&(e={tags:e}),u=r,function(t){function n(t){function r(t,n){return t.turn=n,t.variations&&t.variations.forEach((function(t){let e=n;t.forEach((t=>e=r(t,e)))})),function(t){return"w"===t?"b":"w"}(n)}let n=(u.fen||t.tags&&t.tags.FEN||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1").split(/\s+/)[1];return t.moves.forEach((t=>n=r(t,n))),t}return"game"===r.startRule||"pgn"===r.startRule?n(t):("games"===r.startRule&&t.forEach((t=>n(t))),t)}(function t(n){if(Array.isArray(n))n.forEach((r=>t(r)));else if("tags"!==r.startRule){let t=n.moves[n.moves.length-1];"string"==typeof t&&(n.moves.pop(),n.tags&&(n.tags.Result=t))}return n}(function(t){if(u&&"games"===u.startRule){if(!Array.isArray(t))return[];if(0===t.length)return t;let r=t.pop();(Object.keys(r.tags).length>0||r.moves.length>0)&&t.push(r)}return t}(e)));var u}}))},715:(t,r,n)=>{var e,u,a;!function(o){if("object"==typeof t.exports){var s=o(n(875),r);void 0!==s&&(t.exports=s)}else u=[n,r],void 0===(a="function"==typeof(e=o)?e.apply(r,u):e)||(t.exports=a)}((function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.split=void 0,r.split=function(t,r){let n=((t,r="\n")=>t.replace(/\r?\n/g,r))(t).split("\n\n"),e=[],u={tags:"",pgn:"",all:""};return n.forEach((function(t){if(t.startsWith("["))u.tags=t;else if(t){u.pgn=t;let r=u.tags?u.tags+"\n\n"+u.pgn:u.pgn;u.all=r,e.push(u),u={tags:"",pgn:"",all:""}}})),e}}))},875:t=>{function r(t){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=875,t.exports=r}},r={};function n(e){var u=r[e];if(void 0!==u)return u.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),n(607)})();
//# sourceMappingURL=bundle.js.map